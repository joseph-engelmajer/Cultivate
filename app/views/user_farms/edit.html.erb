<%= form_for(@farm, url: {action: "update"}) do |f| %>
  
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name, autofocus: true %>
  </div> 

  <div class="field">
    <%= f.label :description %><br />
    <%= f.text_area :description, size: "60x12" %>
  </div> 
	
  <div class="field">	
  <%= f.file_field :avatars, multiple: true %>	
  </div>

  <div class="field">
  <p> Products </p>	
   <%= f.collection_check_boxes(:product_ids, Product.all, :id, :name) %>
  </div> 

  <div class="field">
  <p> Farming Practices </p>	
   <%= f.collection_check_boxes(:practice_ids, Practice.all, :id, :name) %>
  </div> 

  <div class="field">
  <p> Purchase Options </p>	
   <%= f.collection_check_boxes(:purchase_option_ids, PurchaseOption.all, :id, :name) %>
  </div> 


  <% @purchase_options.each do |option| %>

  <div class="field">
    <input type="text" name="option_description[<%=option.id %>]" value="<%= option.purchase_option_joins.where(farm_id: @farm.id).first.try(:option_description) %>">
  </div> 

  <% end %>
  
  <%= f.submit "Update" %>
<% end %>